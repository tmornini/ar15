// Package main demonstrates the use of the KahanSummer type.
package main

import (
	"fmt"
	"os"

	"github.com/tmornini/ar15/statistics"
	"github.com/tmornini/ar15/wrappers"
)

func main() {
	logger := wrappers.NewNormalAbnormalLogger(os.Stdout, os.Stderr)
	defer logger.Sync()

	data := []float64{
		0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0,
		10.1, 10.2, 10.3, 10.4, 10.5, 10.6, 10.7, 10.8, 10.9, 11.0,
		100.1, 100.2, 100.3, 100.4, 100.5, 100.6, 100.7, 100.8, 100.9, 101.0,
		1000.1, 1000.2, 1000.3, 1000.4, 1000.5, 1000.6, 1000.7, 1000.8, 1000.9, 1001.0,
		10000.1, 10000.2, 10000.3, 10000.4, 10000.5, 10000.6, 10000.7, 10000.8, 10000.9, 10001.0,
		100000.1, 100000.2, 100000.3, 100000.4, 100000.5, 100000.6, 100000.7, 100000.8, 100000.9, 100001.0,
		1000000.1, 1000000.2, 1000000.3, 1000000.4, 1000000.5, 1000000.6, 1000000.7, 1000000.8, 1000000.9, 1000001.0,
		10000000.1, 10000000.2, 10000000.3, 10000000.4, 10000000.5, 10000000.6, 10000000.7, 10000000.8, 10000000.9, 10000001.0,
		100000000.1, 100000000.2, 100000000.3, 100000000.4, 100000000.5, 100000000.6, 100000000.7, 100000000.8, 100000000.9, 100000001.0,
		1000000000.1, 1000000000.2, 1000000000.3, 1000000000.4, 1000000000.5, 1000000000.6, 1000000000.7, 1000000000.8, 1000000000.9, 1000000001.0,
		10000000000.1, 10000000000.2, 10000000000.3, 10000000000.4, 10000000000.5, 10000000000.6, 10000000000.7, 10000000000.8, 10000000000.9, 10000000001.0,
		100000000000.1, 100000000000.2, 100000000000.3, 100000000000.4, 100000000000.5, 100000000000.6, 100000000000.7, 100000000000.8, 100000000000.9, 100000000001.0,
	}

	kahanSummer := statistics.NewKahanSummer()

	sum := 0.0

	for _, value := range data {
		sum += value
		kahanSummer.Add(value)
	}

	fmt.Println("basic sum:", sum)
	fmt.Println(kahanSummer.Sum())
}
